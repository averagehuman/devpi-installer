[unix_http_server]
file = {{run_root|abspath}}/supervisor.socket
chown = {{user}}:{{group}}
    
[supervisord]        
logfile={{log_root|abspath}}/supervisord.log
pidfile={{run_root|abspath}}/supervisord.pid
logfile_maxbytes=50MB           
logfile_backups=5
loglevel=info           ; info, debug, warn, trace
redirect_stderr = True
nodaemon=false          ; run supervisord as a daemon
minfds=1024             ; number of startup file descriptors
minprocs=200            ; number of process descriptors
childlogdir={{log_root}}   ; where child log files will live
user = {{user}}

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix://{{run_root|abspath}}/supervisor.socket

# if you have a system-wide supervisord installation 
# you might move the below actual program definitions 
# to a global /etc/supervisord/conf.d/devpi-server.conf

[program:devpi-server]
command={{server_root}}/bin/devpi-server --host={{host}} --port={{port}} --serverdir={{serverdir|abspath}} --bottleserver={{bottleserver}} --refresh={{refresh}}{% if debug|eval %} --debug{% endif %}{% if bypass_cdn|eval %} --bypass_cdn{% endif %}{% if outside_url %} ---outside-url=outside_url{% endif %}
priority=999
startsecs = 5
redirect_stderr = True
autostart=True
autorestart=True

